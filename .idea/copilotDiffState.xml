<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/chatbot_diseo/presentation/footer/Pantalla_y_footer.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/chatbot_diseo/presentation/footer/Pantalla_y_footer.kt" />
              <option name="originalContent" value="package com.example.chatbot_diseo.presentation.footer&#10;&#10;import android.Manifest&#10;import android.app.Activity&#10;import android.content.Intent&#10;import android.content.pm.PackageManager&#10;import android.net.Uri&#10;import android.provider.Settings&#10;import androidx.activity.compose.rememberLauncherForActivityResult&#10;import androidx.activity.result.contract.ActivityResultContracts&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.core.content.ContextCompat&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.chatbot_diseo.presentation.navigation.AppNavGraph&#10;&#10;@Composable&#10;fun PantallaPrincipal() {&#10;    val context = LocalContext.current&#10;    val navController = rememberNavController()&#10;&#10;    var hasPermissions by remember {&#10;        mutableStateOf(&#10;            ContextCompat.checkSelfPermission(context, Manifest.permission.READ_CALENDAR) == PackageManager.PERMISSION_GRANTED&#10;        )&#10;    }&#10;&#10;    if (hasPermissions) {&#10;        // Observar la ruta actual para mostrar/ocultar el BottomNavBar&#10;        val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;        val currentRoute = navBackStackEntry?.destination?.route&#10;&#10;        // Lista de rutas donde NO debe aparecer el BottomNavBar&#10;        val routesWithoutBottomBar = listOf(&quot;login&quot;, &quot;admin_panel&quot;)&#10;        val showBottomBar = currentRoute !in routesWithoutBottomBar&#10;&#10;        // Sistema de navegaci贸n principal&#10;        Scaffold(&#10;            bottomBar = {&#10;                if (showBottomBar) {&#10;                    BottomNavBar(navController = navController)&#10;                }&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Box(modifier = Modifier.padding(innerPadding)) {&#10;                AppNavGraph(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    navController = navController&#10;                )&#10;            }&#10;        }&#10;    } else {&#10;        // Pantalla de permisos sin BottomNavBar&#10;        PermissionScreenForMain(&#10;            modifier = Modifier.fillMaxSize(),&#10;            onPermissionsGranted = { hasPermissions = true }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun PermissionScreenForMain(modifier: Modifier = Modifier, onPermissionsGranted: () -&gt; Unit) {&#10;    var shouldShowRationale by remember { mutableStateOf(false) }&#10;    val context = LocalContext.current&#10;&#10;    val permissionLauncher = rememberLauncherForActivityResult(&#10;        contract = ActivityResultContracts.RequestMultiplePermissions(),&#10;        onResult = { permissions -&gt;&#10;            if (permissions.values.all { it }) {&#10;                onPermissionsGranted()&#10;            } else {&#10;                shouldShowRationale = permissions.entries.any { (perm, isGranted) -&gt;&#10;                    !isGranted &amp;&amp; !(context as Activity).shouldShowRequestPermissionRationale(perm)&#10;                }&#10;            }&#10;        }&#10;    )&#10;&#10;    LaunchedEffect(Unit) {&#10;        permissionLauncher.launch(arrayOf(Manifest.permission.READ_CALENDAR, Manifest.permission.WRITE_CALENDAR))&#10;    }&#10;&#10;    Column(&#10;        modifier = modifier,&#10;        verticalArrangement = Arrangement.Center,&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        Text(&quot;Se necesitan permisos del calendario para usar la app.&quot;)&#10;        Button(onClick = {&#10;            if (shouldShowRationale) {&#10;                val intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS)&#10;                intent.data = Uri.fromParts(&quot;package&quot;, context.packageName, null)&#10;                context.startActivity(intent)&#10;            } else {&#10;                permissionLauncher.launch(arrayOf(Manifest.permission.READ_CALENDAR, Manifest.permission.WRITE_CALENDAR))&#10;            }&#10;        }) {&#10;            Text(if (shouldShowRationale) &quot;Abrir configuraci贸n&quot; else &quot;Conceder permisos&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun PlaceholderScreen(screenName: String) {&#10;    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {&#10;        Text(text = &quot;Pantalla de $screenName&quot;)&#10;    }&#10;}&#10;&#10;@Preview&#10;@Composable&#10;fun PantallaPrincipalPreview() {&#10;    PantallaPrincipal()&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.chatbot_diseo.presentation.footer&#10;&#10;import android.Manifest&#10;import android.app.Activity&#10;import android.content.Intent&#10;import android.content.pm.PackageManager&#10;import android.net.Uri&#10;import android.provider.Settings&#10;import androidx.activity.compose.rememberLauncherForActivityResult&#10;import androidx.activity.result.contract.ActivityResultContracts&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.core.content.ContextCompat&#10;import androidx.navigation.compose.currentBackStackEntryAsState&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.chatbot_diseo.presentation.navigation.AppNavGraph&#10;&#10;@Composable&#10;fun PantallaPrincipal() {&#10;    val context = LocalContext.current&#10;    val navController = rememberNavController()&#10;&#10;    var hasPermissions by remember {&#10;        mutableStateOf(&#10;            ContextCompat.checkSelfPermission(context, Manifest.permission.READ_CALENDAR) == PackageManager.PERMISSION_GRANTED&#10;        )&#10;    }&#10;&#10;    if (hasPermissions) {&#10;        // Observar la ruta actual para mostrar/ocultar el BottomNavBar&#10;        val navBackStackEntry by navController.currentBackStackEntryAsState()&#10;        val currentRoute = navBackStackEntry?.destination?.route&#10;&#10;        // Lista de rutas donde NO debe aparecer el BottomNavBar&#10;        val routesWithoutBottomBar = listOf(&quot;login&quot;, &quot;admin_panel&quot;)&#10;        val showBottomBar = currentRoute !in routesWithoutBottomBar&#10;&#10;        // Sistema de navegaci贸n principal&#10;        Scaffold(&#10;            bottomBar = {&#10;                if (showBottomBar) {&#10;                    BottomNavBar(navController = navController)&#10;                }&#10;            }&#10;        ) { innerPadding -&gt;&#10;            Box(modifier = Modifier.padding(innerPadding)) {&#10;                AppNavGraph(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    navController = navController&#10;                )&#10;            }&#10;        }&#10;    } else {&#10;        // Pantalla de permisos sin BottomNavBar&#10;        PermissionScreenForMain(&#10;            modifier = Modifier.fillMaxSize(),&#10;            onPermissionsGranted = { hasPermissions = true }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun PermissionScreenForMain(modifier: Modifier = Modifier, onPermissionsGranted: () -&gt; Unit) {&#10;    var shouldShowRationale by remember { mutableStateOf(false) }&#10;    val context = LocalContext.current&#10;&#10;    val permissionLauncher = rememberLauncherForActivityResult(&#10;        contract = ActivityResultContracts.RequestMultiplePermissions(),&#10;        onResult = { permissions -&gt;&#10;            if (permissions.values.all { it }) {&#10;                onPermissionsGranted()&#10;            } else {&#10;                shouldShowRationale = permissions.entries.any { (perm, isGranted) -&gt;&#10;                    !isGranted &amp;&amp; !(context as Activity).shouldShowRequestPermissionRationale(perm)&#10;                }&#10;            }&#10;        }&#10;    )&#10;&#10;    LaunchedEffect(Unit) {&#10;        permissionLauncher.launch(arrayOf(Manifest.permission.READ_CALENDAR, Manifest.permission.WRITE_CALENDAR))&#10;    }&#10;&#10;    Column(&#10;        modifier = modifier,&#10;        verticalArrangement = Arrangement.Center,&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        Text(&quot;Se necesitan permisos del calendario para usar la app.&quot;)&#10;        Button(onClick = {&#10;            if (shouldShowRationale) {&#10;                val intent = Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS)&#10;                intent.data = Uri.fromParts(&quot;package&quot;, context.packageName, null)&#10;                context.startActivity(intent)&#10;            } else {&#10;                permissionLauncher.launch(arrayOf(Manifest.permission.READ_CALENDAR, Manifest.permission.WRITE_CALENDAR))&#10;            }&#10;        }) {&#10;            Text(if (shouldShowRationale) &quot;Abrir configuraci贸n&quot; else &quot;Conceder permisos&quot;)&#10;        }&#10;    }&#10;}&#10;&#10;@Preview&#10;@Composable&#10;fun PantallaPrincipalPreview() {&#10;    PantallaPrincipal()&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>